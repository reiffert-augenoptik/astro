---
import HtmlRoot from '@components/HtmlRoot.astro';
import AppHeader from '@components/AppHeader.astro';
import AppSidebar from '@components/AppSidebar.astro';
import AppContent from '@components/AppContent.astro';
import AppFooter from '@components/AppFooter.astro';

const { frontmatter }: { frontmatter: Frontmatter } = {
  frontmatter: {},
  ...Astro.props,
};

const { title, description } = frontmatter;
---

<HtmlRoot title={title} description={description}>
  <AppHeader />
  <AppSidebar />
  <AppContent align={frontmatter.align} width={frontmatter.width}>
    <slot />
  </AppContent>
  <AppFooter />
</HtmlRoot>

<script>
  // @ts-ignore
  import simpleParallax from 'simple-parallax-js/vanilla';

  // Wait for DOM to be ready
  document.addEventListener('DOMContentLoaded', () => {
    const images = document.querySelectorAll('.parallax img');
    if (images.length > 0) {
      new simpleParallax(images, {
        orientation: 'down',
        scale: 1.8,
        transition: 'cubic-bezier(0,0,0,1)',
        delay: 0.8,
      });
    }
  });
</script>
